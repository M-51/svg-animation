var svganimation=function(t){"use strict";function e(t){const e=new Map,{attributes:a}=t;for(let t=0;t<a.length;t+=1)a[t].specified&&e.set(a[t].name,parseFloat(a[t].value)||a[t].value);return e}function a(t,e){for(;t.attributes.length>0;)t.removeAttribute(t.attributes[0].name);e.forEach((e,a)=>{t.setAttribute(a,e)})}function n(t,e){let a=null;const n=t.transform.baseVal;n.length?(n.consolidate(),({matrix:a}=n.getItem(0))):a=e.createSVGMatrix(),n.initialize(e.createSVGTransformFromMatrix(a))}function i(t){const e={};return e.translate={x:t.e,y:t.f},e.scale=Math.sign(t.a)*Math.sqrt(t.a*t.a+t.c*t.c),e.rotate=Math.atan2(-t.c,t.a)*(180/Math.PI),e}function s(t){return void 0===t}function r(t){return!Number.isNaN(parseFloat(t))&&Number.isFinite(t)}function o(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function c(t,...e){e.forEach(e=>{t.setAttributeNS(null,e[0],e[1])})}function l(t){let e=t;for(;e.tagName;){if("svg"===e.tagName.toLowerCase())return e;e=e.parentNode}throw new Error("Cannot find SVG element! All animated elements must have SVG parent")}function h(t){const e={};return Object.keys(F).forEach(a=>{s(t)||s(t[a])?e[a]=F[a]:e[a]=t[a]}),e}function f(t,e){const a=[];return Array.isArray(e.animation[t])?e.animation[t].forEach(n=>{a.push([t,n,e])}):a.push([t,e.animation[t],e]),a}function u(t){const e=[];return t.forEach(t=>{Object.keys(t.animation).forEach(a=>{e.push(...f(a,t))})}),e}function m(t,e,a){const n=t;return n.e=e,n.f=a,n}function p(t,e,a){const n=t,i=Math.sin(e)*a,s=Math.cos(e)*a;return n.a=s,n.b=-i,n.c=i,n.d=s,n}function d(t,e,a){const n=t,i=Math.sin(a)*e,s=Math.cos(a)*e;return n.a=s,n.b=-i,n.c=i,n.d=s,n}function g(t,e,a,n,i){const s=t,r=Math.sin(n)*i,o=Math.cos(n)*i;return s.a=o,s.b=-r,s.c=r,s.d=o,s.e=e,s.f=a,s}function y(t,e,a,n,i){const s=t,r=Math.sin(i)*n,o=Math.cos(i)*n;return s.a=o,s.b=-r,s.c=r,s.d=o,s.e=e,s.f=a,s}function x(t,e,a){const n=t,i=Math.sin(a)*e,s=Math.cos(a)*e;return n.a=s,n.b=-i,n.c=i,n.d=s,n}function b(t,e,a,n,i){const s=t,r=Math.sin(i)*n,o=Math.cos(i)*n;return s.a=o,s.b=-r,s.c=r,s.d=o,s.e=e,s.f=a,s}function w(t,e){function a(t){return s.indexOf(t)}const n=t.transform,i=n.translate,s=Object.keys(e);let r;return-1!==a("translate")&&-1===a("rotate")&&-1===a("scale")?r=(a=>{i.x=e.translate.x(a),i.y=e.translate.y(a);const n=m(t.matrix,i.x,i.y);t.setMatrix(n)}):-1===a("translate")&&-1!==a("rotate")&&-1===a("scale")?r=(a=>{n.rotate=e.rotate(a);const i=p(t.matrix,n.rotate,n.scale);t.setMatrix(i)}):-1===a("translate")&&-1===a("rotate")&&-1!==a("scale")?r=(a=>{n.scale=e.scale(a);const i=d(t.matrix,n.scale,n.rotate);t.setMatrix(i)}):-1!==a("translate")&&-1!==a("rotate")&&-1===a("scale")?r=(a=>{i.x=e.translate.x(a),i.y=e.translate.y(a);const s=e.rotate(a),r=g(t.matrix,i.x,i.y,s,n.scale);t.setMatrix(r)}):-1!==a("translate")&&-1===a("rotate")&&-1!==a("scale")?r=(a=>{i.x=e.translate.x(a),i.y=e.translate.y(a),n.scale=e.scale(a);const s=y(t.matrix,i.x,i.y,n.scale,n.rotate);t.setMatrix(s)}):-1===a("translate")&&-1!==a("rotate")&&-1!==a("scale")?r=(a=>{n.rotate=e.rotate(a),n.scale=e.scale(a);const i=x(t.matrix,n.scale,n.rotate);t.setMatrix(i)}):-1!==a("translate")&&-1!==a("rotate")&&-1!==a("scale")&&(r=(a=>{i.x=e.translate.x(a),i.y=e.translate.y(a),n.rotate=e.rotate(a),n.scale=e.scale(a);const s=b(t.matrix,i.x,i.y,n.scale,n.rotate);t.setMatrix(s)})),r}function M(t,e){return a=>{const{value:n}=t.animation[e];t.setAttribute(e,n(a))}}function C(t){const e=[];return t.forEach(t=>{const[a,n,i]=t;"transform"===a?e.push([w(i,n),n]):e.push([M(i,a),n])}),e}function A(t,e){let a;return a=e.local?a=>{a>=e.range[0]&&t(a-e.range[0])}:a=>{a>=e.range[0]&&t(a)}}function I(t,e,a){let n;return n=e.local?i=>{i>=e.range[0]&&i<=e.range[1]?t(i-e.range[0]):i>e.range[1]&&a(n)}:i=>{i>=e.range[0]&&i<=e.range[1]?t(i):i>e.range[1]&&a(n)}}function V(t,e,a){let n;return n=e.local?i=>{i>=e.range&&(t(i-e.range),a(n))}:i=>{i>=e.range&&(t(i),a(n))}}function v(t,e,a){let n;const{range:i}=e;return Array.isArray(i)?1===i.length?n=A(t,e):2===i.length&&(n=I(t,e,a)):r(i)&&(n=V(t,e,a)),n}function E(t,e){const a=[];return t.forEach(t=>{const[n,i]=t;i.range?a.push(v(n,i,e)):a.push(n)}),a}function S(t,e){const a=o("g"),n=o("polygon"),i=o("polygon");c(n,["points","-10,-10 -10,10 0,-5 0,5"]),c(i,["points","-10,-10 -10,10 10,0 10,0"]),a.appendChild(n),a.appendChild(i);const s=o("rect");c(s,["x","-10"],["y","-10"],["width","20"],["height","20"],["fill-opacity","0"]);const r=o("g");return r.appendChild(a),r.appendChild(s),function(){const t=e.viewBox.baseVal,a=e.createSVGMatrix();a.e=t.x+25,a.f=t.y+(t.height-25),r.transform.baseVal.initialize(e.createSVGTransformFromMatrix(a))}(),function(){c(a,["fill",t.interfaceColor]);const{matrix:e}=r.transform.baseVal.getItem(0);e.a=t.interfaceSize,e.d=t.interfaceSize,"auto"!==t.interfacePosition&&([e.e,e.f]=t.interfacePosition),r.transform.baseVal.getItem(0).setMatrix(e)}(),e.appendChild(r),{play:function(){c(n,["points","-10,-10 -10,10 0,-5 0,5"]),c(i,["points","-10,-10 -10,10 10,0 10,0"])},pause:function(){c(n,["points","-9,-10 -9,10 -2,10 -2,-10"]),c(i,["points","2,-10 2,10 9,10 9,-10"])},off:function(){c(a,["display","none"])},on:function(){c(n,["points","-10,-10 -10,10 0,-5 0,5"]),c(i,["points","-10,-10 -10,10 10,0 10,0"]),c(a,["display","block"])},button:s}}function j(t,e){const a=o("marker");a.id="arrow",c(a,["viewBox","0 0 10 10"],["refX","1"],["refY","5"],["markerWidth","3"],["markerHeight","3"],["orient","auto"]);const n=o("path");c(n,["d","M 0 0 L 10 5 L 0 10 z"]),a.appendChild(n);const i=o("g"),s=o("path"),r=o("path");c(s,["d","M-10 0 A 10 10 0 0 1 0 -10"],["marker-end","url(#arrow)"]),c(r,["d","M10 0 A 10 10 0 0 1 0 10"],["marker-end","url(#arrow)"]),i.appendChild(s),i.appendChild(r),c(i,["fill","none"],["stroke-width","2"],["transform","translate(30, 0)"]);const l=o("rect");c(l,["x","-10"],["y","-10"],["width","20"],["height","20"],["fill-opacity","0"],["transform","translate(30, 0)"]);const h=o("g");h.appendChild(i),h.appendChild(l);let f=e.getElementsByTagName("defs")[0];return f||(f=o("defs"),e.insertBefore(f,e.firstChild)),function(){const t=e.viewBox.baseVal,a=e.createSVGMatrix();a.e=t.x+25,a.f=t.y+(t.height-25),h.transform.baseVal.initialize(e.createSVGTransformFromMatrix(a))}(),function(){c(i,["stroke",t.interfaceColor]),c(a,["fill",t.interfaceColor]);const{matrix:e}=h.transform.baseVal.getItem(0);e.a=t.interfaceSize,e.d=t.interfaceSize,"auto"!==t.interfacePosition&&([e.e,e.f]=t.interfacePosition),h.transform.baseVal.getItem(0).setMatrix(e)}(),f.appendChild(a),e.appendChild(h),{off:function(){c(i,["display","none"])},on:function(){c(i,["display","block"])},button:l}}class k{constructor(t){this.item=t}setVariables(){this.variables=e(this.item)}initMatrix(t){n(this.item,t),this.matrix=this.item.transform.baseVal.getItem(0).matrix,this.SVGTransform=this.item.transform.baseVal.getItem(0)}resetAttributes(){a(this.item,this.variables)}decomposeMatrix(){this.transform=i(this.matrix)}setMatrix(t){this.SVGTransform.setMatrix(t)}setAttribute(t,e){this.item.setAttributeNS(null,t,e)}}const F={showInterface:!0,interfaceAnimation:!0,interfaceSize:1,interfaceColor:"#000",interfacePosition:"auto",restartAtTheEnd:!1};class T{constructor(){this.status="not started",this.timer={animationId:0,startTime:0,time:0}}init(...t){if(0===t.length)throw new Error('No objects to animate. Add objects to "init" function');if(this.objectList=new Set,t.forEach(t=>{Object.prototype.hasOwnProperty.call(t,"animation")&&this.objectList.add(t)}),0===this.objectList.size)throw new Error('No objects to animate. At least one object must have "animate" property');this.svg=l(t[0].item),this.settings=h(this.settings),this.objectList.forEach(t=>{t.setVariables(),t.initMatrix(this.svg),t.decomposeMatrix()}),this.dispatcher(),this.settings.showInterface&&(this.interfaceControler=this.interfaceControler())}reset(){this.objectList.forEach(t=>{t.resetAttributes(),t.setVariables(),t.initMatrix(this.svg),t.decomposeMatrix()}),this.dispatcher()}}return T.prototype.play=function(){function t(){e.timer.time=Date.now()-e.timer.startTime,e.frame(e.timer.time/1e3),e.timer.animationId=window.requestAnimationFrame(t)}const e=this;"not started"===this.status?(this.status="playing",this.timer.startTime=Date.now(),this.timer.animationId=window.requestAnimationFrame(t),this.settings.showInterface&&(this.interfaceControler.playPause.pause(),this.interfaceControler.refresh.on())):"paused"===this.status&&(this.status="playing",this.timer.startTime=Date.now()-this.timer.time,this.timer.animationId=window.requestAnimationFrame(t),this.settings.showInterface&&this.interfaceControler.playPause.pause())},T.prototype.pause=function(){"playing"===this.status&&(this.status="paused",window.cancelAnimationFrame(this.timer.animationId),this.settings.showInterface&&this.interfaceControler.playPause.play())},T.prototype.refresh=function(){"playing"!==this.status&&"paused"!==this.status&&"ended"!==this.status||(this.status="not started",window.cancelAnimationFrame(this.timer.animationId),this.timer.startTime=0,this.timer.time=0,this.settings.showInterface&&(this.interfaceControler.playPause.on(),this.interfaceControler.refresh.off()),this.reset())},T.prototype.end=function(){if("playing"===this.status||"paused"===this.status){this.status="ended";const t=this;window.setTimeout(()=>{window.cancelAnimationFrame(t.timer.animationId),t.settings.restartAtTheEnd&&t.refresh(),this.settings.showInterface&&this.interfaceControler.playPause.off()},25)}},T.prototype.frame=function(t){for(let e=0;e<this.loop.length;e+=1)this.loop[e](t)},T.prototype.dispatcher=function(){const t=C(u(this.objectList)),e=this.deleteItemFromLoop.bind(this);this.loop=E(t,e)},T.prototype.deleteItemFromLoop=function(t){this.loop.splice(this.loop.indexOf(t),1),this.loop<1&&this.end()},T.prototype.interfaceControler=function(){const t=S(this.settings,this.svg),e=j(this.settings,this.svg);e.off();const a=this;return t.button.addEventListener("click",function(){"not started"===a.status||"paused"===a.status?a.play():"playing"===a.status&&a.pause()},!1),e.button.addEventListener("click",function(){"playing"!==a.status&&"paused"!==a.status&&"ended"!==a.status||a.refresh()},!1),{playPause:t,refresh:e}},t.Obj=k,t.Create=T,t}({});