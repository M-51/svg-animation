var svganimation=function(t){"use strict";function a(t){return void 0===t}function e(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function n(t,...a){a.forEach(a=>{t.setAttributeNS(null,a[0],a[1])})}function i(){Object.keys(H).forEach(t=>{a(svganimation.settings)||a(svganimation.settings[t])?W[t]=H[t]:W[t]=svganimation.settings[t]})}function r(){const t=W.svg.viewBox.baseVal,a=W.svg.createSVGMatrix();a.e=t.x+25,a.f=t.y+(t.height-25),U.transform.baseVal.initialize(W.svg.createSVGTransformFromMatrix(a))}function s(){n(J,["stroke",W.interfaceColor]),n(X,["fill",W.interfaceColor]);const{matrix:t}=U.transform.baseVal.getItem(0);t.a=W.interfaceSize,t.d=W.interfaceSize,"auto"!==W.interfacePosition&&([t.e,t.f]=W.interfacePosition),U.transform.baseVal.getItem(0).setMatrix(t)}function o(){n(J,["display","none"])}function c(){n(J,["display","block"])}function l(){let t=W.svg.getElementsByTagName("defs")[0];t||(t=e("defs"),W.svg.insertBefore(t,W.svg.firstChild)),r(),s(),t.appendChild(X),W.svg.appendChild(U)}function f(){const t=W.svg.viewBox.baseVal,a=W.svg.createSVGMatrix();a.e=t.x+25,a.f=t.y+(t.height-25),at.transform.baseVal.initialize(W.svg.createSVGTransformFromMatrix(a))}function u(){n(Z,["fill",W.interfaceColor]);const{matrix:t}=at.transform.baseVal.getItem(0);t.a=W.interfaceSize,t.d=W.interfaceSize,"auto"!==W.interfacePosition&&([t.e,t.f]=W.interfacePosition),at.transform.baseVal.getItem(0).setMatrix(t)}function m(){n($,["points","-9,-10 -9,10 -2,10 -2,-10"]),n(_,["points","2,-10 2,10 9,10 9,-10"])}function h(){n($,["points","-10,-10 -10,10 0,-5 0,5"]),n(_,["points","-10,-10 -10,10 10,0 10,0"])}function d(){f(),u(),W.svg.appendChild(at)}function p(){W.showInterface&&(l(),d())}function x(t,a,e){const n=t;return n.e=a,n.f=e,n}function g(t,a,e){const n=t,i=Math.sin(a)*e,r=Math.cos(a)*e;return n.a=r,n.b=-i,n.c=i,n.d=r,n}function M(t,a,e){const n=t,i=Math.sin(e)*a,r=Math.cos(e)*a;return n.a=r,n.b=-i,n.c=i,n.d=r,n}function y(t,a,e,n,i){const r=t,s=Math.sin(n)*i,o=Math.cos(n)*i;return r.a=o,r.b=-s,r.c=s,r.d=o,r.e=a,r.f=e,r}function b(t,a,e,n,i){const r=t,s=Math.sin(i)*n,o=Math.cos(i)*n;return r.a=o,r.b=-s,r.c=s,r.d=o,r.e=a,r.f=e,r}function v(t,a,e){const n=t,i=Math.sin(e)*a,r=Math.cos(e)*a;return n.a=r,n.b=-i,n.c=i,n.d=r,n}function w(t,a,e,n,i){const r=t,s=Math.sin(i)*n,o=Math.cos(i)*n;return r.a=o,r.b=-s,r.c=s,r.d=o,r.e=a,r.f=e,r}function V(t,a){function e(t){return r.indexOf(t)}const n=t.transform,i=n.translate,r=Object.keys(a);let s;return-1!==e("translate")&&-1===e("rotate")&&-1===e("scale")?s=(e=>{i.x=a.translate.x(e),i.y=a.translate.y(e);const n=x(t.matrix,i.x,i.y);t.setMatrix(n)}):-1===e("translate")&&-1!==e("rotate")&&-1===e("scale")?s=(e=>{n.rotate=a.rotate(e);const i=g(t.matrix,n.rotate,n.scale);t.setMatrix(i)}):-1===e("translate")&&-1===e("rotate")&&-1!==e("scale")?s=(e=>{n.scale=a.scale(e);const i=M(t.matrix,n.scale,n.rotate);t.setMatrix(i)}):-1!==e("translate")&&-1!==e("rotate")&&-1===e("scale")?s=(e=>{i.x=a.translate.x(e),i.y=a.translate.y(e);const r=a.rotate(e),s=y(t.matrix,i.x,i.y,r,n.scale);t.setMatrix(s)}):-1!==e("translate")&&-1===e("rotate")&&-1!==e("scale")?s=(e=>{i.x=a.translate.x(e),i.y=a.translate.y(e),n.scale=a.scale(e);const r=b(t.matrix,i.x,i.y,n.scale,n.rotate);t.setMatrix(r)}):-1===e("translate")&&-1!==e("rotate")&&-1!==e("scale")?s=(e=>{n.rotate=a.rotate(e),n.scale=a.scale(e);const i=v(t.matrix,n.scale,n.rotate);t.setMatrix(i)}):-1!==e("translate")&&-1!==e("rotate")&&-1!==e("scale")&&(s=(e=>{i.x=a.translate.x(e),i.y=a.translate.y(e),n.rotate=a.rotate(e),n.scale=a.scale(e);const r=w(t.matrix,i.x,i.y,n.scale,n.rotate);t.setMatrix(r)})),s}function C(t,a){"transform"===t?Array.isArray(a.animation.transform)?a.animation.transform.forEach(t=>{et.push(V(a,t))}):et.push(V(a,a.animation.transform)):console.log(t)}function S(t){t.forEach(t=>{Object.keys(t.animation).forEach(a=>{C(a,t)})})}function A(...t){t.forEach(t=>{Object.prototype.hasOwnProperty.call(t,"animation")&&nt.add(t)})}function k(){nt.forEach(t=>{t.setVariables(),t.initMatrix(),t.decomposeMatrix(),S(nt)})}function E(){nt.forEach(t=>{t.resetAttributes(),t.setVariables(),t.initMatrix(),t.decomposeMatrix()})}function I(t){for(let a=0;a<et.length;a+=1)et[a](t)}function z(){function t(){I((st=Date.now()-rt)/1e3),it=window.requestAnimationFrame(t)}it=window.requestAnimationFrame(t)}function F(){rt=Date.now(),z()}function G(){rt=Date.now()-st,z()}function P(){window.cancelAnimationFrame(it)}function O(){window.cancelAnimationFrame(it),rt=0,st=0,E()}function T(){"not started"===ot?(ot="playing",c(),m(),F()):"playing"===ot?(ot="paused",P(),h()):"paused"===ot&&(ot="playing",G(),m())}function j(){"playing"!==ot&&"paused"!==ot&&"ended"!==ot||(ot="not started",o(),O(),h())}function B(){tt.addEventListener("click",T,!1),o(),R.addEventListener("click",j,!1)}function q(t){const a=new Map,{attributes:e}=t;for(let t=0;t<e.length;t+=1)e[t].specified&&a.set(e[t].name,parseFloat(e[t].value)||e[t].value);return a}function L(t,a){for(;t.attributes.length>0;)t.removeAttribute(t.attributes[0].name);a.forEach((a,e)=>{t.setAttribute(e,a)})}function D(t){let a=null;const e=t.transform.baseVal;e.length?(e.consolidate(),({matrix:a}=e.getItem(0))):a=W.svg.createSVGMatrix(),e.initialize(W.svg.createSVGTransformFromMatrix(a))}function N(t){const a={};return a.translate={x:t.e,y:t.f},a.scale=Math.sign(t.a)*Math.sqrt(t.a*t.a+t.c*t.c),a.rotate=Math.atan2(-t.c,t.a)*(180/Math.PI),a}const H={svg:document.querySelector("svg"),showInterface:!0,interfaceAnimation:!0,interfaceSize:1,interfaceColor:"#000",interfacePosition:"auto"},W={},X=e("marker");X.id="arrow",n(X,["viewBox","0 0 10 10"],["refX","1"],["refY","5"],["markerWidth","3"],["markerHeight","3"],["orient","auto"]);const Y=e("path");n(Y,["d","M 0 0 L 10 5 L 0 10 z"]),X.appendChild(Y);const J=e("g"),K=e("path"),Q=e("path");n(K,["d","M-10 0 A 10 10 0 0 1 0 -10"],["marker-end","url(#arrow)"]),n(Q,["d","M10 0 A 10 10 0 0 1 0 10"],["marker-end","url(#arrow)"]),J.appendChild(K),J.appendChild(Q),n(J,["fill","none"],["stroke-width","2"],["transform","translate(30, 0)"]);const R=e("rect");R.id="refresh",n(R,["x","-10"],["y","-10"],["width","20"],["height","20"],["fill-opacity","0"],["transform","translate(30, 0)"]);const U=e("g");U.appendChild(J),U.appendChild(R);const Z=e("g"),$=e("polygon"),_=e("polygon");n($,["points","-10,-10 -10,10 0,-5 0,5"]),n(_,["points","-10,-10 -10,10 10,0 10,0"]),Z.appendChild($),Z.appendChild(_);const tt=e("rect");tt.id="playPause",n(tt,["x","-10"],["y","-10"],["width","20"],["height","20"],["fill-opacity","0"]);const at=e("g");at.appendChild(Z),at.appendChild(tt);const et=[],nt=new Set;let it=0,rt=0,st=0,ot="not started";class ct{constructor(t){this.item=t}setVariables(){this.variables=q(this.item)}initMatrix(){D(this.item),this.matrix=this.item.transform.baseVal.getItem(0).matrix,this.SVGTransform=this.item.transform.baseVal.getItem(0)}resetAttributes(){L(this.item,this.variables)}decomposeMatrix(){this.transform=N(this.matrix)}setMatrix(t){this.SVGTransform.setMatrix(t)}}return t.Obj=ct,t.start=function(...t){A(...t),i(),p(),B(),k()},t}({});