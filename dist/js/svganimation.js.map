{"version":3,"file":"svganimation.js","sources":["../../src/js/main-object/constructor.js","../../src/js/main-object/player.js","../../src/js/engine/helpers/attributes.js","../../src/js/settings.js","../../src/js/engine/helpers/matrix.js","../../src/js/engine/object.js","../../src/js/main-object/draw.js","../../src/js/index.js"],"sourcesContent":["class Create {\n    constructor() {\n        this.objectList = new Set();\n        this.status = 'not started';\n        this.timer = {\n            animationId: 0,\n            startTime: 0,\n            time: 0,\n        };\n    }\n    init(...objects) {\n        objects.forEach((object) => {\n            if (Object.prototype.hasOwnProperty.call(object, 'animation')) {\n                this.objectList.add(object);\n            }\n        });\n    }\n}\n\nexport default Create;\n","import Create from './constructor';\n\nfunction createPlayer() {\n    Create.prototype.play = function play() {\n        if (this.status === 'not started') {\n            this.status = 'playing';\n            this.timer.startTime = Date.now();\n        } else if (this.status === 'paused') {\n            this.status = 'playing';\n            this.timer.startTime = Date.now() - this.timer.time;\n        }\n        const that = this;\n        function startLoop() {\n            that.timer.time = Date.now() - that.timer.startTime;\n            that.frame(that.timer.time / 1000);\n            that.timer.animationID = window.requestAnimationFrame(startLoop);\n        }\n        this.timer.animationID = window.requestAnimationFrame(startLoop);\n    };\n\n    Create.prototype.pause = function pause() {\n        if (this.status === 'playing') {\n            this.status = 'paused';\n            window.cancelAnimationFrame(this.timer.animationID);\n        }\n    };\n\n    Create.prototype.refresh = function refresh() {\n        if (this.status === 'playing' || this.status === 'paused' || this.status === 'ended') {\n            this.status = 'not started';\n            window.cancelAnimationFrame(this.timer.animationID);\n            this.timer.startTime = 0;\n            this.timer.time = 0;\n            // reset(); REMEMBER TO RESET ALL ITEMS!!! this.objectList\n        }\n    };\n}\n\nexport default createPlayer;\n","function getAttributes(object) {\r\n    const list = new Map();\r\n    const { attributes } = object;\r\n    for (let i = 0; i < attributes.length; i += 1) {\r\n        if (attributes[i].specified) {\r\n            list.set(attributes[i].name, parseFloat(attributes[i].value) || attributes[i].value);\r\n        }\r\n    }\r\n    return list;\r\n}\r\n\r\nfunction resetAttributes(object, attributes) {\r\n    // remove all attributes\r\n    while (object.attributes.length > 0) {\r\n        object.removeAttribute(object.attributes[0].name);\r\n    }\r\n    // set new attributes\r\n    attributes.forEach((value, key) => {\r\n        object.setAttribute(key, value);\r\n    });\r\n}\r\n\r\nexport { getAttributes, resetAttributes };\r\n","import { undef } from './utils';\n\nconst defaultSettings = {\n    svg: document.querySelector('svg'),\n    showInterface: true,\n    interfaceAnimation: true,\n    interfaceSize: 1,\n    interfaceColor: '#000',\n    interfacePosition: 'auto',\n};\nconst compiledSettings = {};\n\nfunction compileSettings() {\n    Object.keys(defaultSettings).forEach((rule) => {\n        if (!undef(svganimation.settings) && !undef(svganimation.settings[rule])) {\n            compiledSettings[rule] = svganimation.settings[rule];\n        } else {\n            compiledSettings[rule] = defaultSettings[rule];\n        }\n    });\n}\n\nexport { compileSettings, compiledSettings };\n","import { compiledSettings } from '../../settings';\r\n\r\nfunction initMatrix(object) {\r\n    let matrix = null;\r\n    const svgTransform = object.transform.baseVal;\r\n    if (svgTransform.length) {\r\n        svgTransform.consolidate();\r\n        ({ matrix } = svgTransform.getItem(0));\r\n    } else {\r\n        matrix = compiledSettings.svg.createSVGMatrix();\r\n    }\r\n    svgTransform.initialize(compiledSettings.svg.createSVGTransformFromMatrix(matrix));\r\n}\r\n\r\nfunction decomposeMatrix(m) {\r\n    const transform = {};\r\n    transform.translate = {\r\n        x: m.e,\r\n        y: m.f,\r\n    };\r\n    transform.scale = Math.sign(m.a) * Math.sqrt((m.a * m.a) + (m.c * m.c));\r\n    transform.rotate = Math.atan2(-m.c, m.a) * (180 / Math.PI);\r\n\r\n    return transform;\r\n}\r\nexport { initMatrix, decomposeMatrix };\r\n","import { getAttributes, resetAttributes } from './helpers/attributes';\nimport { initMatrix, decomposeMatrix } from './helpers/matrix';\n\nclass Obj {\n    constructor(item) {\n        this.item = item;\n    }\n    setVariables() {\n        this.variables = getAttributes(this.item);\n    }\n    initMatrix() {\n        initMatrix(this.item);\n        this.matrix = this.item.transform.baseVal.getItem(0).matrix;\n        this.SVGTransform = this.item.transform.baseVal.getItem(0);\n    }\n    resetAttributes() {\n        resetAttributes(this.item, this.variables);\n    }\n    decomposeMatrix() {\n        this.transform = decomposeMatrix(this.matrix);\n    }\n    setMatrix(matrix) {\n        this.SVGTransform.setMatrix(matrix);\n    }\n}\n\nexport default Obj;\n","import Create from './constructor';\n\nfunction createDrawFunction() {\n    Create.prototype.frame = function frame() {\n        console.log('a');\n        /*\n        for (let i = 0; i < this.loop.length; i += 1) {\n            this.loop[i](this.timer.time);\n        }\n        */\n    };\n}\n\nexport default createDrawFunction;\n","// import buttons from './interface/interface';\nimport player from './main-object/player';\n// import { compileSettings } from './settings';\nimport Obj from './engine/object';\n// import { add, init } from './engine/controler';\nimport Create from './main-object/constructor';\nimport draw from './main-object/draw';\n\nplayer();\ndraw();\n\nexport { Obj, Create };\n"],"names":["createPlayer","createDrawFunction","player","draw"],"mappings":"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"}